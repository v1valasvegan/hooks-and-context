(this["webpackJsonpeugene-test"]=this["webpackJsonpeugene-test"]||[]).push([[0],{182:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(36),l=a.n(c),o=a(28),u=a(29),i=a(24),s=a.n(i),d=a(33),m=a(14),p=a(34),b=a.n(p),f=a(203),E=a(50),j=a(76),O=a(193),h=a(204),v="https://jsonplaceholder.typicode.com",y={padding:Object(O.a)(5),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},x={display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"10px",minWidth:"500px",boxShadow:"0 0 5px 5px #c3c3c3",borderRadius:"5px"};function g(e){var t=e.error;return r.a.createElement(E.a,{style:y},r.a.createElement("span",null,"Oops, something went wrong."),r.a.createElement("div",null,null===t||void 0===t?void 0:t.message),r.a.createElement("button",{type:"button",onClick:function(){return window.location.reload()}},"Try to reload page"))}var C=a(183);function w(){return r.a.createElement(E.a,{display:"flex",alignItems:"center",justifyContent:"center",height:400},r.a.createElement(C.a,null))}var k=a(202),B=a(197),S=Object(n.createContext)(),I=Object(n.createContext)();function D(e){var t=e.post,a=e.onDeleteClick,c=Object(n.useContext)(S),l=Object(m.a)(c,1)[0],u=t.userId,i=t.id,s=t.title,d=(l.find((function(e){return e.id===u}))||{}).name;return r.a.createElement(k.a.Row,null,r.a.createElement(k.a.TextCell,null,s),r.a.createElement(k.a.TextCell,null,d),r.a.createElement(k.a.Cell,{display:"flex",justifyContent:"space-around",flexBasis:Object(O.a)(10),flexGrow:0},r.a.createElement(B.a,{appearance:"minimal",icon:"delete",color:"muted",onClick:function(){return a(i)}}),r.a.createElement(B.a,{appearance:"minimal",icon:"edit",color:"muted",is:o.b,to:"/posts/".concat(i)})))}function T(e){var t=e.posts,a=e.onDeleteClick;return r.a.createElement(k.a,{border:!0},r.a.createElement(k.a.Head,null,r.a.createElement(k.a.TextHeaderCell,null,"Title"),r.a.createElement(k.a.TextHeaderCell,null,"User"),r.a.createElement(k.a.TextHeaderCell,{flexBasis:Object(O.a)(10),flexGrow:0},"Actions")),r.a.createElement(k.a.Body,null,null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(D,{key:e.id,post:e,onDeleteClick:a})}))))}function A(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(I),u=Object(m.a)(l,5),i=u[0],p=u[1],x=u[2],C=u[3],k=u[4],B=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,c(null),e.next=5,b.a.delete("".concat(v,"/posts/").concat(t));case 5:C(),f.a.success("Post deleted",{duration:2}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),c(null),f.a.danger("Something went wrong",{duration:2});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return k?r.a.createElement(g,{error:k}):p?r.a.createElement(w,null):r.a.createElement(E.a,{style:y},r.a.createElement(j.a,{marginBottom:Object(O.a)(2),appearance:"primary",iconBefore:"add",is:o.b,to:"/posts/new"},"Add task"),r.a.createElement(T,{posts:i,onDeleteClick:c}),r.a.createElement(h.a,{isShown:Boolean(a),title:"Delete",intent:"danger",onCloseComplete:function(){return c(null)},confirmLabel:"Yes, delete",onConfirm:function(){return B(a)}},"Are you sure you want to delete this post?"))}function V(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(!1),o=Object(m.a)(l,2),u=o[0],i=o[1],p=Object(n.useState)(null),f=Object(m.a)(p,2),E=f[0],j=f[1],O=Object(n.useCallback)(Object(d.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.prev=1,t.next=4,b.a.get("".concat(v,"/").concat(e));case 4:a=t.sent,n=a.data,c(n),i(!1),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),j(t.t0),i(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),[e]);return Object(n.useEffect)((function(){O()}),[O]),[r,u,i,O,E,j]}function q(e){var t=e.children,a=V("users"),n=Object(m.a)(a,2),c=n[0],l=n[1];return r.a.createElement(S.Provider,{value:a},l||0===c.length?r.a.createElement(w,null):t)}var H=a(1),J=a(43),P=a(200),U=a(201),F=a(199);function G(){var e=Object(u.g)().id,t=V("posts/".concat(e)),a=Object(m.a)(t,6),c=a[0],l=a[1],i=a[2],p=a[4],h=a[5],C=Object(n.useContext)(S),k=Object(m.a)(C,5),B=k[0],I=k[1],D=k[4],T=Object(n.useState)(Object(J.a)({},c)),A=Object(m.a)(T,2),q=A[0],G=A[1];Object(n.useEffect)((function(){return G(c)}),[c]);var N=function(e){return function(t){G(Object(J.a)({},q,Object(H.a)({},e,t.target.value)))}},R=function(){var t=Object(d.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),i(!0),t.prev=2,t.next=5,b.a.put("".concat(v,"/posts/").concat(e),{body:JSON.stringify({title:q.title,body:q.body,userId:q.userId,id:e}),headers:{"Content-type":"application/json; charset=UTF-8"}});case 5:f.a.success("Changes have been saved",{duration:2}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),h(!0);case 11:i(!1);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}();return l||I?r.a.createElement(w,null):p||D?r.a.createElement(g,null):r.a.createElement(E.a,{style:y},r.a.createElement(j.a,{marginBottom:Object(O.a)(2),appearance:"primary",iconBefore:"back",is:o.b,to:"/posts"},"Back"),r.a.createElement("form",{style:x,onSubmit:R},r.a.createElement(P.a,{onInput:N("userId"),required:!0,defaultValue:q.userId,marginBottom:Object(O.a)(2)},r.a.createElement("option",{value:"placeholder",disabled:!0},"-- Select user --"),B&&B.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}))),r.a.createElement(U.a,{marginBottom:Object(O.a)(2),onChange:N("title"),defaultValue:q.title,placeholder:"Add title here",required:!0}),r.a.createElement(F.a,{marginBottom:Object(O.a)(2),onChange:N("body"),defaultValue:q.body,placeholder:"Add yor text here"}),r.a.createElement(j.a,{type:"submit"},"Save")))}function N(e){var t=e.children,a=V("posts"),n=Object(m.a)(a,2),c=n[0],l=n[1];return r.a.createElement(I.Provider,{value:a},l||0===c.length?r.a.createElement(w,null):t)}function R(){var e=Object(n.useContext)(S),t=Object(m.a)(e,5),a=t[0],c=t[1],l=t[4],u=Object(n.useContext)(I),i=Object(m.a)(u,6),p=i[1],h=i[2],C=i[4],k=i[5],B=Object(n.useState)({}),D=Object(m.a)(B,2),T=D[0],A=D[1],V=function(e){return function(t){A(Object(J.a)({},T,Object(H.a)({},e,t.target.value)))}},q=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h(!0),e.prev=2,e.next=5,b.a.post("".concat(v,"/posts/"),{body:JSON.stringify({title:T.title,body:T.body,userId:T.userId}),headers:{"Content-type":"application/json; charset=UTF-8"}});case 5:f.a.success("Post added",{duration:2}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),k(!0);case 11:h(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return c||p?r.a.createElement(w,null):l||C?r.a.createElement(g,null):r.a.createElement(E.a,{style:y},r.a.createElement(j.a,{marginBottom:Object(O.a)(2),appearance:"primary",iconBefore:"arrow-left",is:o.b,to:"/posts"},"Back"),r.a.createElement("form",{style:x,onSubmit:q},r.a.createElement(P.a,{onInput:V("userId"),required:!0,defaultValue:"placeholder",marginBottom:Object(O.a)(1)},r.a.createElement("option",{value:"placeholder",disabled:!0},"-- Select user --"),a&&a.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}))),r.a.createElement(U.a,{marginBottom:Object(O.a)(1),onChange:V("title"),defaultValue:T.title,placeholder:"Add title here",required:!0}),r.a.createElement(F.a,{marginBottom:Object(O.a)(2),onChange:V("body"),defaultValue:T.body,placeholder:"Add yor text here"}),r.a.createElement(j.a,{type:"submit",intent:"success"},"Save")))}var L=function(){return r.a.createElement(o.a,null,r.a.createElement(N,null,r.a.createElement(q,null,r.a.createElement(u.d,null,r.a.createElement(u.a,{exact:!0,from:"/",to:"/posts"}),r.a.createElement(u.b,{exact:!0,path:"/posts",component:A}),r.a.createElement(u.b,{path:"/posts/new",component:R}),r.a.createElement(u.b,{path:"/posts/:id",component:G})))))};l.a.render(r.a.createElement(L,null),document.getElementById("root"))},86:function(e,t,a){e.exports=a(182)}},[[86,1,2]]]);
//# sourceMappingURL=main.081f57dc.chunk.js.map